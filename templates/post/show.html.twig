{% extends 'base.html.twig' %}

{% block title %}Salon{% endblock %}

{% block body %}

    <div class="ml-2 mt-3">
        <a href="{{ path('post_all', { id: salon.id }) }}"><i class="fas fa-chevron-left mr-2"></i>Retour</a>
    </div>

    <div class="row">
    <div class="col-md-6 mx-auto">
        <article class="pin bg-white rounded shadow">
            <div class="mw-100 overflow-hidden rounded-top">
                <a href="{{ path('salon_show', {id: salon.id}) }}"><img src="{{ asset('/build/images/family-posing-shore-lake.1a7628e4.jpg') }}" alt="{{ salon.name }}" class="w-100 " /></a>
            </div>

            <div class="p-2">
                <h1 class="h5 text-secondary text-decoration-none">{{ salon.name }}</h1>
                <p class="text-muted">
                    <small>
                        Submitted
                        by {{ app.user.username }}
                    </small>
                </p>
                <p class="pt-1 text-break">
                    Salon: {{ salon.name }}
                </p>

                <div class="pt-1">
                    <a href="{{ path('salon_edit', {id: salon.id}) }}" class="btn btn-light">Edit</a>
                    <a href="#" onclick="event.preventDefault(); confirm('Are you sure ?') &&
                        document.getElementById('salon-form').submit()" class="btn btn-light">Delete</a>

                    <a href="#" data-toggle="modal" data-target="#modal_post_{{ 1 }}" class="btn btn-light">
                            Comments
                    </a>


                    <form id="pin-delete-form" action="{{ path('salon_delete', {id: salon.id}) }}" method="post" style="display: none;">
                        <input type="hidden" name="_method" value="DELETE">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token('salon_deletion_' ~ salon.id) }}">
                    </form>
                </div>
            </div>

        </article>
    </div>

    <div class="modal fade" id="modal_post_{{ 1 }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
         aria-hidden="true">

        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">

            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Post {{ 1}}</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {% for post in salon.posts %}
                        <div>
                            <div class="d-flex overflow-hidden mt-3" style="flex-direction: column">
                                <img src="{{ post.picture }}" class="mw-100" alt=""> {# <br> {{ post.legend }}#}
                            </div>

                            <form method="POST" action="{{ path('post_addcomm', {post: post.id, salon: salon.id} ) }}">
                            <div class="row mt-3 ml-1 text-muted">
                                <label for="{{ post.id }}">Poste ton commentaire :</label>

                                <div class="col-md-12 " style="display: flex; flex-direction: column; justify-items: center; align-items: center">
                                    <textarea type="text" name="{{ post.id }}" style="min-width: 300px; min-height: 70px; border: 0.7px solid #B0A6A6; border-radius: 7px; box-sizing: border-box; box-shadow: 0 0 0; margin-top: 5px;"></textarea>
                                    <button type="submit" class="btn btn-light shadow text-center mt-3" style="width: 300px; border-radius: 30px; border: 0.5px Solid #B0A6A6">Envoie ton commentaire</button>
                                </div>
                            </div>
                            </form>

                            <div class="card mt-5 shadow" style="border: none;">
                                <div class="comments text-muted mb-2">
                                    <h5><i>Commentaires:</i></h5>
                                </div>
                                {% for comment in post.comments %}
                                <div class="col-12 ">
                                    <p>{{ comment.comment }} #<i>{{ comment.user.username }}</i></p>
                                </div>
                                {% endfor %}
                            </div>


                        </div>

                    {% endfor %}

                </div>
            </div>
        </div>
    </div>

{% endblock %}