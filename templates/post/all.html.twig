{% extends 'base.html.twig' %}

{% block title %}New post{% endblock %}

{% block body %}
    {% include './components/_navbar.html.twig' %}
 <div class="Hello">
    <div class="ml-2 mt-3">
        <a href="#"><i class="fas fa-chevron-left mr-2"></i>Retour</a>
    </div>
    <div class="ml-2 mt-3">
        <h1 class="ml-2 mt-3" style="color: #EC164B"> #{{ salon.name }}</h1>
        <h4> Votre clé de salon : {{ salon.slug }}</h4>
    </div>
    {#
    {% for post in salon.posts %}
        <div>
            <img src="/uploads/{{ post.picture }}" alt=""> | {{ post.legend }} <br>

            <form method="POST" action="{{ path('post_addcomm', {post: post.id, salon: salon.name} ) }}">
            <label for="{{ post.id }}">Poste ton commentaire :</label>
            <textarea type="text" name="{{ post.id }}"></textarea>
            <button>Envoie ton commentaire</button>
            </form>

            {% for comment in post.comments %}

            {{ comment.user.username }}
            {{ comment.comment }}
        {% endfor %}
        </div>

    {% endfor %}
    #}

    {% if salon.posts|length > 0 %}
     <div class="all-header">
        <h1 class="text-center text-white mb-2 mt-2"> 13/01/21</h1>

        <p class="text-center text-white mb-2" style="color: #FFFFFF">-</p>
            {% for theme in salon.themes %}
        <h1 class="text-center text-white mb-2" style="color: #FFFFFF">“{{ theme.theme }}”</h1>
            {% endfor %}
     </div>

            <div class="row mx-auto ">
                {% for post in salon.posts %}
                    <div class="card d-flex text-center m-3" style="min-width: 380px; margin-top: 30px">

                        <article class="post bg-white rounded shadow">
                            <div class="mw-100 overflow-hidden rounded-top">
                                <a href="{{ path('post_show', {id: post.id}) }}"><img src="/uploads/{{ post.picture }}" alt="{{ post.legend }}" class="w-100" /></a>
                            </div>
                            {#
                            <h2 class="h5 pt-3 text-center"><a href="{{ path('post_show', {id: post.id}) }}" data-toggle="modal" data-target="#modal_post_{{ post.id }}"
                                                               class="text-secondary text-decoration-none"> Poster un commentaire </a></h2>
                            #}
                            <p class="text-muted text-center pb-2"><small>Submitted by {{ post.user.username }}</small></p>

                        </article>

                        <div>
                            <div class="d-flex mt-3" style="flex-direction: column">
                                <img src="{{ post.picture }}" class="mw-100" alt="">  <br> {{ post.legend }}
                            </div>

                            <form method="POST" action="{{ path('post_addcomm', {post: post.id, salon: salon.name} ) }}">
                                <div class="row mt-3 ml-3 text-muted">
                                    <label for="{{ post.id }}">Poste ton commentaire :</label>

                                    <div class="col-md-12 " style="display: flex; flex-direction: column; justify-items: center; align-items: center">
                                        <textarea type="text" name="{{ post.id }}" style="min-width: 300px; min-height: 70px; border: 0.7px solid #B0A6A6; border-radius: 7px; box-sizing: border-box; box-shadow: 0 0 0; margin-top: 5px;"></textarea>
                                        <button type="submit" class="btn btn-light shadow text-center mt-3" style="width: 300px; border-radius: 30px; border: 0.5px Solid #B0A6A6">Envoie ton commentaire</button>
                                    </div>
                                </div>
                            </form>


                        <div class="card col-md-12 mt-5" style="border: none;">
                            <div class="comments text-muted mb-2">
                                <h3><i>Commentaires:</i></h3>
                            </div>
                            {% for comment in post.comments %}
                                <div class="col-sm-12 ">
                                    <p>{{ comment.comment }} #<i>{{ comment.user.username }}</i></p>
                                </div>
                            {% endfor %}
                        </div>



                    </div>
                {% endfor %}

            </div>
    {% else %}
        <p class="h1 text-center">No post yet. <a href="{{ path('salon_new') }}">Be the first !</a> </p>
    {% endif %}

{#
    <div class="row">
        <div class="col-md-12">
            <div class="modal modal-lg fade" id="modal_post_{{ post.id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
                 aria-hidden="true">

                <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="min-width: 80%">

                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Post {{ post.id }}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">

                                    <form method="POST" action="{{ path('post_addcomm', {post: post.id, salon: salon.id} ) }}">
                                        <div class="row mt-3 ml-1 text-muted">
                                            <label for="{{ post.id }}">Poste ton commentaire :</label>

                                            <div class="col-md-12 " style="display: flex; flex-direction: column; justify-items: center; align-items: center">
                                                <textarea type="text" name="{{ post.id }}" style="min-width: 300px; min-height: 70px; border: 0.7px solid #B0A6A6; border-radius: 7px; box-sizing: border-box; box-shadow: 0 0 0; margin-top: 5px;"></textarea>
                                                <button type="submit" class="btn btn-light shadow text-center mt-3" style="width: 300px; border-radius: 30px; border: 0.5px Solid #B0A6A6">Envoie ton commentaire</button>
                                            </div>
                                        </div>
                                    </form>



                                </div>



                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
#}
            </div>
{% endblock %}
